# 发布到 Cursor 插件扩展库指南

## 1. 准备工作

### 创建发布者账户
1. 访问 [Visual Studio Marketplace](https://marketplace.visualstudio.com/)
2. 点击 "Sign in" 登录 Microsoft 账户
3. 点击 "Publish extensions" 创建发布者
4. 填写发布者信息：
   - Publisher ID: `html-comment-toggle` (已在 package.json 中设置)
   - Display Name: 你的显示名称
   - 上传头像和描述

### 获取访问令牌
1. 在发布者页面点击 "Create new token"
2. 设置令牌名称和过期时间
3. 复制生成的访问令牌（保存好，只显示一次）

## 2. 打包插件

使用以下命令打包插件（推荐方式）：

```bash
npx @vscode/vsce package --no-dependencies
```

这个命令会：
- 自动下载最新版本的 vsce
- 跳过依赖检查，避免依赖问题
- 生成 `.vsix` 文件

## 3. 登录发布者账户

```bash
npx @vscode/vsce login html-comment-toggle
```
输入之前获取的访问令牌

## 4. 更新版本号

在发布前更新版本号：
```bash
# 补丁版本 (1.0.0 -> 1.0.1)
npm version patch

# 小版本 (1.0.0 -> 1.1.0)
npm version minor

# 大版本 (1.0.0 -> 2.0.0)
npm version major
```

## 5. 发布插件

```bash
npx @vscode/vsce publish --no-dependencies
```

## 6. 验证发布

1. 访问 [Visual Studio Marketplace](https://marketplace.visualstudio.com/)
2. 搜索 "HTML Comment Toggle"
3. 确认插件已成功发布

## 7. 在 Cursor 中安装

1. 打开 Cursor
2. 按 `Ctrl+Shift+X` 打开扩展面板
3. 搜索 "HTML Comment Toggle"
4. 点击 "Install" 安装

## 8. 更新插件

当需要更新插件时：
1. 修改代码
2. 更新版本号：`npm version patch`
3. 重新发布：`npx @vscode/vsce publish`

## 注意事项

- 使用 `npx @vscode/vsce` 可以避免全局安装和依赖问题
- 确保插件名称和发布者 ID 唯一
- 每次发布都需要更新版本号
- 发布后需要等待几分钟才能在市场中搜索到
